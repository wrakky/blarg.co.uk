<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="icon" href="/blarg.co.uk/assets/images/icons/favicon.ico"><link rel="author" href="/blarg.co.uk/humans.txt"><link rel="canonical" href="http://blarg.co.uk/blog/how-to-install-mozjpeg"><link rel="stylesheet" href="/blarg.co.uk/assets/css/site.css"><title>How to Install mozjpeg - blarg.co.uk</title><link rel="alternate" type="application/rss+xml" title="blarg.co.uk feed" href="http://blarg.co.uk/feed.xml"></head><body><div id="top"><div class="container"><ul class="social pull-right"><li><a href="https://github.com/wrakky" data-toggle="tooltip" data-placement="bottom" title="Github"><i class="fa fa-github"></i></a></li><li><a href="https://twitter.com/wrakky" data-toggle="tooltip" data-placement="bottom" title="Twitter"><i class="fa fa-twitter"></i></a></li><li><a href="http://www.flickr.com/photos/16120271@N03/" data-toggle="tooltip" data-placement="bottom" title="Flickr"><i class="fa fa-flickr"></i></a></li></ul></div></div><header id="header" class="container"><div class="navbar navbar-default" role="navigation"><div class="container-fluid"><div class="navbar-header"><button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar-links"><span class="sr-only">Toggle navigation</span> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span></button> <a class="navbar-brand" href="/blarg.co.uk/">blarg.co.uk</a></div><div class="collapse navbar-collapse" id="navbar-links"><ul class="nav navbar-nav navbar-right"><li><a href="/blarg.co.uk/blarg/">Blarg</a></li><li class="active"><a href="/blarg.co.uk/blog/">Blog</a></li><li><a href="/blarg.co.uk/tools/">Tools</a></li><li><a href="/blarg.co.uk/astronomy/">Astronomy</a></li></ul></div></div></div></header><div id="page" class="container page-blog"><div id="breadcrumbs" class="clearfix"><div class="container-fluid"><h1 class="pull-left">How to Install mozjpeg</h1></div></div><div class="row"><div id="content" class="col-md-9"><div class="info"><div class="pull-left"><i class="fa fa-calendar"></i> 3rd April 2014</div><div class="pull-right"><i class="fa fa-comments"></i> <a href="/blog/how-to-install-mozjpeg#disqus_thread"></a></div></div><br class="clearfix"><div class="article"><p>About a month ago Mozilla <a href="https://blog.mozilla.org/research/2014/03/05/introducing-the-mozjpeg-project/">announced their ‘mozjpeg’</a> project with the aim of improving <a href="http://en.wikipedia.org/wiki/Lossless_compression">lossless</a> jpeg compression and making the web a faster place. Forked from <a href="http://libjpeg-turbo.virtualgl.org/">libjpeg-turbo</a>, mozjpeg is more concerned with reducing filesize than doing it quickly. It uses the same compression process written in a perl script by Loren Merritt called <code class="highlighter-rouge">jpegcrush</code> and claims to be able to reduce jpeg size by 10% on average.</p><p>So, it sounds pretty good and you want to save some bandwidth and give mozjpeg a go. With a lack of an auto-install option using a repository like APT you will need to build it from source which sounds complicated but is actually pretty easy as I show.</p><p>Full build instructions can be found in the <a href="https://github.com/mozilla/mozjpeg/blob/master/BUILDING.txt">build instructions file</a> in the github repo. These are very comprehensive and cover all “Un*x Platforms (including Cygwin and OS X)”. This guide aims to simplify the process by giving step by step guide for building on Ubuntu 12.04 (and should be portable for other versions of Ubuntu and probably other flavours of Linux as well with a some minor changes).</p><h2 id="download-source">Download Source</h2><p>First you need to download the source.</p><p>You can either use a release version which should be stable and ready for production use from the <a href="https://github.com/mozilla/mozjpeg/releases">list of release archives</a> and download the latest version and extract it (v1.0.1 is the latest version at time of writing):</p><div class="highlight"><pre><code class="language-bash" data-lang="bash">wget https://github.com/mozilla/mozjpeg/archive/v1.0.1.tar.gz
tar -xvf v1.0.1.tar.gz</code></pre></div><p>Alternatively, if you want the latest cutting edge version you can clone the <a href="https://github.com/mozilla/mozjpeg">github repository</a> directly:</p><div class="highlight"><pre><code class="language-bash" data-lang="bash">sudo apt-get install git
git clone https://github.com/mozilla/mozjpeg.git</code></pre></div><h2 id="install-requirements">Install Requirements</h2><p>Building mozjpeg requires the following programs to be installed:</p><ul><li>autoconf 2.56 or later</li><li>automake 1.7 or later</li><li>libtool 1.4 or later</li><li>NASM 0.98 or later</li><li>make</li></ul><p>You can go ahead and install them like so:</p><div class="highlight"><pre><code class="language-bash" data-lang="bash">sudo apt-get install autoconf automake libtool nasm make</code></pre></div><h2 id="building">Building</h2><p>Once the source has been downloaded and extracted, navigate to the extracted contents directory. Next running <code class="highlighter-rouge">autoreconf</code> will to build the configure file. Then create a <code class="highlighter-rouge">build</code> directory inside the source and navigate to it. Once in the build directory, run <code class="highlighter-rouge">configure</code> which will generate the Makefile which is used to install the final program using <code class="highlighter-rouge">make install</code> and is run as <code class="highlighter-rouge">sudo</code> so it has permission to put the installation in /opt.</p><div class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nb">cd </span>mozjpeg-1.0.1
autoreconf -fiv
mkdir build <span class="o">&amp;&amp;</span> <span class="nb">cd </span>build
sh ../configure
sudo make install</code></pre></div><h2 id="usage">Usage</h2><p>Following the above instructions will install mozjpeg in <code class="highlighter-rouge">/opt/libmozjpeg</code> and it can be used by calling <code class="highlighter-rouge">jpegtran</code> in the bin directory:</p><div class="highlight"><pre><code class="language-bash" data-lang="bash">/opt/libmozjpeg/bin/jpegtran -copy none image.jpg &gt; compressed.jpg</code></pre></div><p>However, I find it easier to add the command to my local path so it can be accessed anywhere. Also, as it shares it’s namings with <code class="highlighter-rouge">libjpeg-turbo, renaming it to something like </code>mozjpeg<code class="highlighter-rouge"> makes it more 
</code>convenient to use and remember, especially if you already have <code class="highlighter-rouge">libjpeg-turbo</code> installed:</p><div class="highlight"><pre><code class="language-bash" data-lang="bash">sudo ln -s /opt/libmozjpeg/bin/jpegtran /usr/local/bin/mozjpeg</code></pre></div><p>After adding this link you can use mozjpeg from anywhere easily and conveniently:</p><div class="highlight"><pre><code class="language-bash" data-lang="bash">mozjpeg -copy none image.jpg &gt; compressed.jpg</code></pre></div><p>And there you have it, mozjpeg installed on your system ready to save you bandwidth and speed up your website!</p></div><hr><div id="share"><h3>Share This Page</h3><div class="link-group"><a data-network="twitter" class="social-share btn btn-info" href="https://twitter.com/share?url=http://blarg.co.uk/blog/how-to-install-mozjpeg" rel="popup"><i class="fa fa-twitter"></i> <span>Share on</span>Twitter</a></div><div class="link-group"><a data-network="facebook" class="social-share btn btn-primary" href="https://www.facebook.com/sharer/sharer.php?u=http://blarg.co.uk/blog/how-to-install-mozjpeg" rel="popup"><i class="fa fa-facebook-square"></i> <span>Share on</span>Facebook</a></div><div class="link-group"><a data-network="googleplus" class="social-share btn btn-danger" href="https://plus.google.com/share?url=http://blarg.co.uk/blog/how-to-install-mozjpeg" rel="popup"><i class="fa fa-google-plus"></i> <span>Share on</span>Google+</a></div></div><hr><h3>Join in the Discussion</h3><div id="disqus_thread"></div><script type="text/javascript">

  /* * * CONFIGURATION VARIABLES * * */
  var disqus_shortname = "blargcouk";

  /* * * DISQUS SCRIPT * * */
  (function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();

</script><noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript><script type="text/javascript">

  /* * * CONFIGURATION VARIABLES * * */
  var disqus_shortname = "blargcouk";

  /* * * DISQUS SCRIPT * * */
  (function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = 'http://' + disqus_shortname + '.disqus.com/count.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();

</script></div><div id="sidebar" class="col-md-3"><div class="sidebar-box"><div class="title"><h2><i class="fa fa-share"></i> Share This Page</h2></div><div><a data-network="twitter" class="social-share btn btn-info btn-sm" href="https://twitter.com/share?url=http://blarg.co.uk/blog/how-to-install-mozjpeg" rel="popup"><i class="fa fa-twitter"></i> Twitter</a> <a data-network="facebook" class="social-share btn btn-primary btn-sm" href="https://www.facebook.com/sharer/sharer.php?u=http://blarg.co.uk/blog/how-to-install-mozjpeg" rel="popup"><i class="fa fa-facebook-square"></i> Facebook</a> <a data-network="googleplus" class="social-share btn btn-danger btn-sm" href="https://plus.google.com/share?url=http://blarg.co.uk/blog/how-to-install-mozjpeg" rel="popup"><i class="fa fa-google-plus"></i> Google+</a></div></div><div class="sidebar-box"><div class="title"><h2><i class="fa fa-arrow-circle-right"></i> Lastest From the Blog</h2></div><ul class="list-group"><li class="list-group-item"><a href="/blarg.co.uk/blog/comparison-of-jpeg-lossless-compression-tools">Comparison of JPEG Lossless Compression Tools</a></li><li class="list-group-item"><a href="/blarg.co.uk/blog/how-to-install-mozjpeg">How to Install mozjpeg</a></li><li class="list-group-item"><a href="/blarg.co.uk/blog/recursively-optimize-png-files">Recursively Optimize PNG Files</a></li><li class="list-group-item"><a href="/blarg.co.uk/blog/javascript-date-formats">Javascript Date Formats</a></li><li class="list-group-item"><a href="/blarg.co.uk/blog/automatically-collapse-firephp-responses">Automatically Collapse FirePHP Responses</a></li></ul></div><div class="sidebar-box"><div class="title"><h2><i class="fa fa-cogs"></i> Tools</h2></div><ul class="list-group"><li class="list-group-item"><a href="/blarg.co.uk/tools/page-ruler"><img class="icon" src="/blarg.co.uk/assets/images/browser/chrome.png"> Page Ruler</a><p>Draw a ruler to get pixel dimensions and positioning on any page</p></li><li class="list-group-item"><a href="/blarg.co.uk/tools/robots-vs-humans"><img class="icon" src="/blarg.co.uk/assets/images/browser/chrome.png"> Robots vs Humans</a><p>Display robots.txt and humans.txt files on any website</p></li><li class="list-group-item"><a href="/blarg.co.uk/astronomy/barn-door-tracker-calculator"><img class="icon" src="/blarg.co.uk/assets/images/astronomy/telescope.png"> Barn Door Tracker Calculator</a><p>Quickly calculate the distance between the hinge and drive bolt</p></li></ul></div><div class="sidebar-box"><div class="title"><h2><i class="fa fa-twitter"></i> Latest Tweets</h2></div><div class="tweets"><p class="loading"><i class="fa fa-spinner fa-spin"></i> Loading tweets...</p></div><a href="https://twitter.com/wrakky" class="btn btn-info btn-sm btn-block"><i class="fa fa-twitter"></i> Follow me on Twitter</a></div><script>window.TWEET_TYPE = 'mine';</script><div class="sidebar-box"><div class="title"><h2><i class="fa fa-flickr"></i> Photostream</h2></div><div class="photostream"><p class="loading"><i class="fa fa-spinner fa-spin"></i> Loading photostream...</p></div><a href="https://www.flickr.com/photos/16120271@N03/" class="btn btn-success btn-sm btn-block"><i class="fa fa-flickr"></i> Follow me on Flickr</a></div><script>window.PHOTOSTREAM = true;</script></div></div><div class="clearfix"></div></div><footer id="footer" class="container"><div class="navbar navbar-inverse"><div class="container-fluid"><p class="navbar-text">Copyright &copy; 2015 <a href="/blarg.co.uk/" class="navbar-link">blarg.co.uk</a>. All rights reserved.</p><p class="navbar-text pull-right">Hosted on <a href="http://github.com/" class="navbar-link">Github</a>, Powered by <a href="http://jekyllrb.com/" class="navbar-link">Jekyll</a></p></div></div></footer><script src="/blarg.co.uk/assets/js/libs.js"></script><script src="/blarg.co.uk/assets/js/site.js"></script></body></html>