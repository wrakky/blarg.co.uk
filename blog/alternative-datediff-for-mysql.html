<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="icon" href="/assets/images/icons/favicon.ico"><link rel="author" href="/humans.txt"><link rel="canonical" href="http://blarg.co.uk/blog/alternative-datediff-for-mysql"><link rel="stylesheet" href="/assets/css/site.css"><title>Alternative DATEDIFF for MySQL - blarg.co.uk</title><link rel="alternate" type="application/rss+xml" title="blarg.co.uk feed" href="http://blarg.co.uk/feed.xml"></head><body><div id="top"><div class="container"><ul class="social pull-right"><li><a href="https://github.com/wrakky" data-toggle="tooltip" data-placement="bottom" title="Github"><i class="fa fa-github"></i></a></li><li><a href="https://twitter.com/wrakky" data-toggle="tooltip" data-placement="bottom" title="Twitter"><i class="fa fa-twitter"></i></a></li><li><a href="http://www.flickr.com/photos/16120271@N03/" data-toggle="tooltip" data-placement="bottom" title="Flickr"><i class="fa fa-flickr"></i></a></li></ul></div></div><header id="header" class="container"><div class="navbar navbar-default" role="navigation"><div class="container-fluid"><div class="navbar-header"><button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar-links"><span class="sr-only">Toggle navigation</span> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span></button> <a class="navbar-brand" href="/">blarg.co.uk</a></div><div class="collapse navbar-collapse" id="navbar-links"><ul class="nav navbar-nav navbar-right"><li><a href="/blarg">Blarg</a></li><li class="active"><a href="/blog">Blog</a></li><li><a href="/tools">Tools</a></li><li><a href="/astronomy">Astronomy</a></li></ul></div></div></div></header><div id="page" class="container page-blog"><div id="breadcrumbs" class="clearfix"><div class="container-fluid"><h1 class="pull-left">Alternative DATEDIFF for MySQL</h1></div></div><div class="row"><div id="content" class="col-md-9"><div class="info"><div class="pull-left"><i class="fa fa-calendar"></i> 26th October 2010</div><div class="pull-right"><i class="fa fa-comments"></i> <a href="/blog/alternative-datediff-for-mysql#disqus_thread"></a></div></div><br class="clearfix"><div class="article"><p>The <code class="highlighter-rouge">DATEDIFF()</code> function was added in MySQL version 4.1.1. For earlier versions that do not support this function you can make a work-around for it using the <code class="highlighter-rouge">TO_DAYS</code> function. This article show you how to do just that.</p><p>The following code shows how to perform the equivalent of <code class="highlighter-rouge">DATEDIFF()</code> when it is not available:</p><div class="highlight"><pre><code class="language-mysql" data-lang="mysql"><span class="k">SELECT</span> <span class="nf">TO_DAYS</span><span class="p">(</span><span class="n">date1</span><span class="p">)</span> <span class="o">-</span> <span class="nf">TO_DAYS</span><span class="p">(</span><span class="n">date2</span><span class="p">);</span>

<span class="c1">-- example</span>
<span class="k">SELECT</span> <span class="nf">TO_DAYS</span><span class="p">(</span><span class="s1">&#39;2010-01-03&#39;</span><span class="p">)</span> <span class="o">-</span> <span class="nf">TO_DAYS</span><span class="p">(</span><span class="s1">&#39;2010-01-01&#39;</span><span class="p">);</span> <span class="c1">-- returns &#39;2&#39;</span></code></pre></div><p>This will give the same effect as <code class="highlighter-rouge">DATEDIFF(date1, date2)</code> by converting each date to the number of days since year 0 and subtracting them.</p><p><span class="label label-success">Note:</span> According the <a href="http://dev.mysql.com/doc/refman/4.1/en/date-and-time-functions.html#function_to-days">MySQL manual</a>, <code class="highlighter-rouge">TO_DAYS()</code> is not intended for use with dates that precede the year 1582 because it does not take into account the days that were lost when the Gregorian calendar was introduced so using this method is not advisable for dates earlier than this.</p></div><hr><div id="share"><h3>Share This Page</h3><div class="link-group"><a data-network="twitter" class="social-share btn btn-info" href="https://twitter.com/share?url=http://blarg.co.uk/blog/alternative-datediff-for-mysql" rel="popup"><i class="fa fa-twitter"></i> <span>Share on</span>Twitter</a></div><div class="link-group"><a data-network="facebook" class="social-share btn btn-primary" href="https://www.facebook.com/sharer/sharer.php?u=http://blarg.co.uk/blog/alternative-datediff-for-mysql" rel="popup"><i class="fa fa-facebook-square"></i> <span>Share on</span>Facebook</a></div><div class="link-group"><a data-network="googleplus" class="social-share btn btn-danger" href="https://plus.google.com/share?url=http://blarg.co.uk/blog/alternative-datediff-for-mysql" rel="popup"><i class="fa fa-google-plus"></i> <span>Share on</span>Google+</a></div></div><hr><h3>Join in the Discussion</h3><div id="disqus_thread"></div><script type="text/javascript">

  /* * * CONFIGURATION VARIABLES * * */
  var disqus_shortname = "blargcouk";

  /* * * DISQUS SCRIPT * * */
  (function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();

</script><noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript><script type="text/javascript">

  /* * * CONFIGURATION VARIABLES * * */
  var disqus_shortname = "blargcouk";

  /* * * DISQUS SCRIPT * * */
  (function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = 'http://' + disqus_shortname + '.disqus.com/count.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();

</script></div><div id="sidebar" class="col-md-3"><div class="sidebar-box"><div class="title"><h2><i class="fa fa-share"></i> Share This Page</h2></div><div><a data-network="twitter" class="social-share btn btn-info btn-sm" href="https://twitter.com/share?url=http://blarg.co.uk/blog/alternative-datediff-for-mysql" rel="popup"><i class="fa fa-twitter"></i> Twitter</a> <a data-network="facebook" class="social-share btn btn-primary btn-sm" href="https://www.facebook.com/sharer/sharer.php?u=http://blarg.co.uk/blog/alternative-datediff-for-mysql" rel="popup"><i class="fa fa-facebook-square"></i> Facebook</a> <a data-network="googleplus" class="social-share btn btn-danger btn-sm" href="https://plus.google.com/share?url=http://blarg.co.uk/blog/alternative-datediff-for-mysql" rel="popup"><i class="fa fa-google-plus"></i> Google+</a></div></div><div class="sidebar-box"><div class="title"><h2><i class="fa fa-arrow-circle-right"></i> Lastest From the Blog</h2></div><ul class="list-group"><li class="list-group-item"><a href="/blog/comparison-of-jpeg-lossless-compression-tools">Comparison of JPEG Lossless Compression Tools</a></li><li class="list-group-item"><a href="/blog/how-to-install-mozjpeg">How to Install mozjpeg</a></li><li class="list-group-item"><a href="/blog/recursively-optimize-png-files">Recursively Optimize PNG Files</a></li><li class="list-group-item"><a href="/blog/javascript-date-formats">Javascript Date Formats</a></li><li class="list-group-item"><a href="/blog/automatically-collapse-firephp-responses">Automatically Collapse FirePHP Responses</a></li></ul></div><div class="sidebar-box"><div class="title"><h2><i class="fa fa-cogs"></i> Tools</h2></div><ul class="list-group"><li class="list-group-item"><a href="/tools/page-ruler"><img class="icon" src="/assets/images/browser/chrome.png"> Page Ruler</a><p>Draw a ruler to get pixel dimensions and positioning on any page</p></li><li class="list-group-item"><a href="/tools/robots-vs-humans"><img class="icon" src="/assets/images/browser/chrome.png"> Robots vs Humans</a><p>Display robots.txt and humans.txt files on any website</p></li><li class="list-group-item"><a href="/astronomy/barn-door-tracker-calculator"><img class="icon" src="/assets/images/astronomy/telescope.png"> Barn Door Tracker Calculator</a><p>Quickly calculate the distance between the hinge and drive bolt</p></li></ul></div></div></div><div class="clearfix"></div></div><footer id="footer" class="container"><div class="navbar navbar-inverse"><div class="container-fluid"><p class="navbar-text">Copyright &copy; 2015 <a href="/" class="navbar-link">blarg.co.uk</a>. All rights reserved.</p><p class="navbar-text pull-right">Hosted on <a href="http://github.com/" class="navbar-link">Github</a>, Powered by <a href="http://jekyllrb.com/" class="navbar-link">Jekyll</a></p></div></div></footer><script src="/assets/js/libs.js"></script><script src="/assets/js/site.js"></script></body></html>